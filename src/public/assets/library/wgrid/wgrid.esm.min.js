var S={isEmpty(e){return typeof e=="string"?e.trim()==="":e==null},isNotEmpty(e){return!this.isEmpty(e)},isNotEmptyChildObjct(e,...t){if(this.isEmpty(e))return!1;{let a=e;for(var n=0;n<t.length;n++)if(a[t[n]])a=a[t[n]];else return!1;return!0}},isEmptyRtn(e,t){return this.isEmpty(e)?t:e},isFunction(e){return e==null||e==null?!1:typeof e=="function"},addStyleAttribute(e,t,n){switch(t){case"width":case"height":this.isNotEmpty(n)&&(typeof n=="number"?e.style[t]=n+"px":e.style[t]=n);break;default:e.style[t]=n;break}},elementEmpty(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)},childElementEmpty(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)},getTrNode(e){for(;e.tagName!=="TR";){if(e.tagName==="TABLE"||e.tagName==="BODY"||e.tagName==="HTML")return null;e=e.parentNode}return e},getTdNode(e){for(;e.tagName!=="TD";){if(e.tagName==="TABLE"||e.tagName==="BODY"||e.tagName==="HTML")return null;e=e.parentNode}return e},dateFormat:function(e,t){typeof e=="string"&&e.length==10?e=e.replace(/(\d{4})-(\d{2})-(\d{2})/,"$1-$2-$3"):typeof e=="string"&&e.length==19&&(e=e.replace(/(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/,"$1-$2-$3 $4:$5:$6"));let n=new Date(e);t=t||"YYYY-MM-DD",t=t.toUpperCase();let a=n.getFullYear(),r=n.getMonth()<11?"0"+(n.getMonth()+1):n.getMonth()+1,i=n.getDate()<10?"0"+n.getDate():n.getDate(),s=n.getHours()<10?"0"+n.getHours():n.getHours(),o=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),l=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return t=="YYYY-MM-DD"?a+"-"+r+"-"+i:t=="YYYY-MM-DD HH:MM"?a+"-"+r+"-"+i+" "+s+":"+o:t=="YYYY-MM-DD HH:MM:SS"?a+"-"+r+"-"+i+" "+s+":"+o+":"+l:""},closest:function(e,t){for(;t.tagName!==e;){if(t.tagName==="BODY"||t.tagName==="HTML")return null;t=t.parentNode}return t}};var u={class:{row:{select:"",insert:"insert",update:"update",remove:"remove",choose:"choose"},area:{target:"wgrid",header:"header",body:"body",pagination:"pagination"},pagination:{current:"current"},button:"wgrid-btn"},row:{status:{select:"SELECT",insert:"INSERT",update:"UPDATE",remove:"REMOVE"}}};var k={},z={},q={init:(e,t)=>ne(e,t),search:(e,t)=>z[e.sequence](t),create:e=>ae(e),refresh:e=>oe(e),createRow:(e,t,n)=>B(e,t,n),createNewRow:e=>P(e),createCell:(e,t,n,a,r)=>Z(e,t,n,a,r),prependRow:e=>k[e.sequence].bodyTb.insertBefore(P(e),k[e.sequence].bodyTb.firstChild),appendRow:e=>k[e.sequence].bodyTb.appendChild(P(e)),getHeadElement:e=>k[e.sequence].head,getBodyElement:e=>k[e.sequence].body,getBodyTbElement:e=>k[e.sequence].bodyTb,createPagination:e=>G(e)},ne=(e,t)=>{let n=e.id,a=document.getElementById(n),r=document.createElement("div"),i=document.createElement("table"),s=document.createElement("tr"),o=document.createElement("div"),l=document.createElement("table"),c=document.createElement("div"),g=document.createElement("div");a.classList.add(u.class.area.target),r.classList.add(u.class.area.header),o.classList.add(u.class.area.body),g.classList.add(u.class.area.pagination),a.style.width=e.option.style.width,r.style.overflowX=e.option.style.overflow.x,r.style.overflowY=e.option.style.overflow.y,o.style.height=`calc(${e.option.style.height}px + 0vh)`,o.style.overflowX=e.option.style.overflow.x,o.style.overflowY=e.option.style.overflow.y,i.appendChild(s),r.appendChild(i),o.appendChild(l),o.appendChild(c),a.appendChild(r),a.appendChild(o),a.appendChild(g),k[e.sequence]={id:n,target:a,head:r,headTb:i,headTr:s,body:o,bodyTb:l,bodyEmpty:c,pagination:g},z[e.sequence]=t.search},ae=e=>{e.option.isHead===!0&&ie(e),se(e)},oe=e=>{d.clean(e);let t=k[e.sequence].bodyTb;S.elementEmpty(t),m.getData(e).forEach((n,a)=>t.appendChild(B(e,n,a))),e.option.isPaging===!0&&G(e)},ie=e=>{let t=null,n=null,a=null,r=k[e.sequence].headTr;S.elementEmpty(r);let i=m.getFields(e);for(let s=0;s<i.length;s++){let o=i[s];t=document.createElement("th"),n=document.createElement("div"),o.title?n.textContent=o.title:o.element=="checkbox"?(a=document.createElement("input"),a.setAttribute("type","checkbox"),a.setAttribute("name",o.name),n.appendChild(a)):o.element=="button"?(a=document.createElement("button"),a.classList.add(u.class.button),a.setAttribute("name",o.name),a.textContent=o.button.title,n.appendChild(a)):(a=document.createElement("span"),a.textContent=o.title,n.appendChild(a)),o.width&&(t.style.width=o.width),n.style.textAlign="center",t.appendChild(n),r.appendChild(t)}},se=e=>{S.elementEmpty(k[e.sequence].bodyTb),m.getData(e).forEach((t,n)=>e.element.bodyTb.appendChild(B(e,t,n)))},P=e=>{let t={_rowSeq:d.getNextSeq(e),_state:u.row.status.insert},n=m.getBasicInsertData(e);if(n)for(let i in n)t[i]=n[i];let a=m.getFields(e);for(let i of a){switch(i.element){case"text":case"select":default:t[i.name]="";break;case"number":t[i.name]=0;break;case"checkbox":t[i.name]=e.option.checkbox.check;break}i.data&&i.data.select&&(!i.data.select.empty||i.data.select===!1)&&i.data.select.list?.length>0&&(i.data.select.value?t[i.name]=i.data.select.list[0][i.data.select.value]:t[i.name]=i.data.select.list[0].value)}m.appendData(e,t);let r=q.createRow(e,t,m.getDataSize(e)-1);return e.option.isRowStatusColor==!0&&r.classList.add(u.class.row.insert),r},B=(e,t,n)=>{let a=document.createElement("tr");a.dataset.rowSeq=t._rowSeq,d.setSeqIndex(e,t._rowSeq,n),d.setIdxSequence(e,n,t._rowSeq),d.setSeqRowElement(e,t._rowSeq,a);let r=[];return m.getFields(e).forEach((i,s)=>a.appendChild(Z(e,t,n,i,s,r))),a.style.cursor=e.option.style.row.cursor,r.forEach(i=>i.loaded(i.element,i.row)),a},Z=(e,t,n,a,r,i)=>{let s=null,o=null,l=null,c=null,g=null;return l=document.createElement("td"),c=document.createElement("div"),(t._state==u.row.status.insert||t._state==u.row.status.update)&&a.edit?a.edit=="text"?s="text-edit":a.edit=="number"?s="number-edit":a.edit=="date"?s="date-edit":a.edit=="dateTime"?s="dateTime-edit":s=a.edit:s=a.element,s=="checkbox"?(o=document.createElement("input"),o.setAttribute("type","checkbox"),o.setAttribute("name",a.name),e.option.checkbox.check==t[a.name]?o.checked=!0:o.checked=!1,o.dataset.sync="checkbox",c.appendChild(o)):s=="button"?(o=document.createElement("button"),o.classList.add("wgrid-btn"),o.setAttribute("name",a.name),o.textContent=a.text,c.appendChild(o)):s=="select"?(o=document.createElement("select"),o.classList.add("wgrid-select"),o.classList.add("wgrid-wth100p"),o.setAttribute("name",a.name),o.dataset.sync="select",a?.data?.select?.empty&&(g=document.createElement("option"),g.textContent=a.data.select.empty,o.appendChild(g)),a?.data?.select?.list?a.data.select.list.forEach(x=>{g=document.createElement("option"),g.value=x[a.data.select.value?a.data.select.value:"value"],g.textContent=x[a.data.select.text?a.data.select.text:"text"],g.value==t[a.name]&&(g.selected=!0),o.appendChild(g)}):a?.data?.select?.codeList&&a.data.select.codeList.forEach(x=>{g=document.createElement("option"),g.value=x.code,g.textContent=x.codeNm,g.value==t[a.name]&&(g.selected=!0),o.appendChild(g)}),c.appendChild(o)):s=="date"?(o=document.createElement("span"),o.textContent=t[a.name],c.appendChild(o)):s=="date-edit"?(o=document.createElement("input"),o.classList.add("wgrid-input"),o.classList.add("wgrid-wth-edit"),o.setAttribute("maxlength",10),o.setAttribute("name",a.name),o.dataset.sync="date",o.value=t[a.name],c.appendChild(o)):s=="dateTime"||s=="dateTime-edit"||(s=="text"||s=="number"||!s?(o=document.createElement("span"),o.setAttribute("name",a.name),a.data&&a.data.mapping?o.textContent=a.data.mapping[t[a.name]]:o.textContent=t[a.name],c.appendChild(o)):s=="text-edit"?(o=document.createElement("input"),o.classList.add("wgrid-input"),o.classList.add("wgrid-wth-edit"),o.setAttribute("name",a.name),o.dataset.sync="text",o.value=t[a.name],c.appendChild(o)):s=="number-edit"&&(o=document.createElement("input"),o.classList.add("wgrid-input"),o.classList.add("wgrid-wth-edit"),o.setAttribute("name",a.name),o.setAttribute("maxlength",a.maxlength?a.maxlength:3),o.dataset.sync="number",o.value=t[a.name],c.appendChild(o))),(a.emptyText&&s=="text"||s=="dateTime"||s=="date")&&!t[a.name]&&(c.textContent=a.emptyText),d.setSeqCellElement(e,t._rowSeq,a.name,o),l.appendChild(c),a.name&&(l.dataset.cellName=a.name),a.loaded&&i.push({loaded:a.loaded,element:o,row:Object.assign({},t)}),a.width&&(l.style.width=a.width),c.style.align=a.align?a.align:"center",l},re=(e,t)=>{let n=[10,20,50,100],a=Array.isArray(e?.option?.paging?.pageSizeOptions)?e.option.paging.pageSizeOptions:n,r=[...new Set(a.map(s=>Number.parseInt(s,10)).filter(s=>!Number.isNaN(s)&&s>0))],i=r.length>0?r:n;return t>0&&!i.includes(t)&&i.unshift(t),[...new Set(i)]},G=e=>{let t=k[e.sequence].pagination;S.elementEmpty(t);let n=m.getParameter(e);if(!n?.paging)return;let a=n.paging.pageBlock,r=n.paging.pageSize,i=n.paging.pageNo,s=n.paging.totalCount,o=Math.ceil(i/a),l=(o-1)*a+1,c=o*a,g=Math.ceil(s/r);if(g<=0)return;c>g&&(c=g);let x=(p,R)=>{let E=Number.parseInt(R,10);if(!Number.isNaN(E)&&E>0&&(n.paging.pageSize=E),n.paging.pageNo=p,e.option.pagingMode==="client"){m.setData(e,m.getPagingSource(e),n);return}if(typeof z[e.sequence]!="function")throw new Error("wgrid paging search callback is required in server mode.");z[e.sequence](n).then(C=>m.setData(e,C.list,C.param)).catch(console.error)};if(e.option?.paging?.showPageSizeSelector!==!1){let p=document.createElement("span");p.classList.add("wgrid-page-size");let R=document.createElement("span");R.classList.add("wgrid-page-size-label"),R.textContent="Rows";let E=document.createElement("select");E.classList.add("wgrid-select"),E.classList.add("wgrid-page-size-select"),re(e,r).forEach(C=>{let D=document.createElement("option");D.value=String(C),D.textContent=String(C),C===r&&(D.selected=!0),E.appendChild(D)}),E.addEventListener("change",C=>{x(1,C.target.value)}),p.appendChild(R),p.appendChild(E),t.appendChild(p)}if(l>a){let p=document.createElement("button");p.textContent="<",p.addEventListener("click",R=>x(l-a)),t.appendChild(p)}for(let p=l;p<=c;p++){let R=document.createElement("button");R.textContent=p,p===i?R.classList.add(u.class.pagination.current):R.addEventListener("click",E=>x(p)),t.appendChild(R)}if(c<g){let p=document.createElement("button");p.textContent=">",p.addEventListener("click",R=>x(l+a)),t.appendChild(p)}};var de=1,y={},$={},M={},N={},ee={},m={init:(e,t)=>le(e,t),getFields:e=>ee[e.sequence],setData:(e,t,n)=>pe(e,t,n),appendData:(e,t)=>y[e.sequence].data.push(t),getDeepData:(e,t)=>ue(e,t),getData:(e,t)=>me(e,t),getOriginData:e=>y[e.sequence].originData,getDataSize:e=>y[e.sequence].data.length,getDataRowSeq:(e,t)=>y[e.sequence].data[d.getSeqIndex(e,t)],getDataIndex:(e,t)=>y[e.sequence].data[t],getSelectData:e=>y[e.sequence].data.filter(t=>Q(t._state)),getInsertData:e=>y[e.sequence].data.filter(t=>he(t._state)),getUpdateData:e=>y[e.sequence].data.filter(t=>we(t._state)),getDeleteData:e=>y[e.sequence].data.filter(t=>Re(t._state)),getApplyData:e=>y[e.sequence].data.filter(t=>!Q(t._state)),getBasicInsertData:e=>$[e.sequence].insert,getParameter:e=>M[e.sequence],getPagingSource:e=>ge(e),getPagingData:e=>M[e.sequence]?.paging},F=(e,t)=>{let n=Number.parseInt(e,10);return Number.isNaN(n)||n<1?t:n},ce=e=>{let t=[10,20,50,100];if(!Array.isArray(e))return t;let n=[...new Set(e.map(a=>F(a,null)).filter(a=>a!==null))];return n.length>0?n:t},le=(e,t)=>{e.sequence=de++,y[e.sequence]={data:[],originData:{},editData:{}},$[e.sequence]={},$[e.sequence].insert=t?.data?.insert===void 0?null:t.data.insert,ee[e.sequence]=t.fields;let n=ce(t?.option?.paging?.pageSizeOptions??t?.option?.paging?.pageSizes),a=n.includes(F(t?.option?.paging?.pageSize,n[0]))?F(t?.option?.paging?.pageSize,n[0]):n[0];M[e.sequence]={paging:{pageNo:1,pageSize:a,pageBlock:5,totalCount:0}},N[e.sequence]=[]},ue=(e,t)=>S.isEmpty(t)?JSON.parse(JSON.stringify(y[e.sequence].data)):JSON.parse(JSON.stringify(y[e.sequence].data[t])),me=(e,t)=>S.isEmpty(t)?y[e.sequence].data:y[e.sequence].data[t],ge=e=>Array.isArray(N[e.sequence])?JSON.parse(JSON.stringify(N[e.sequence])):[],A=(e,t,n=1)=>{let a=Number.parseInt(e,10);return Number.isNaN(a)?t:a<n?n:a},K=(e,t)=>{let n=A(t,0,0),a=A(e?.pageSize,10,1),r=A(e?.pageBlock,5,1),i=Math.max(1,Math.ceil(n/a));return{pageNo:Math.min(A(e?.pageNo,1,1),i),pageSize:a,pageBlock:r,totalCount:n}},Y=e=>JSON.parse(JSON.stringify(Array.isArray(e)?e:[])),pe=(e,t,n)=>{let a=Y(t),r=n&&typeof n=="object"?JSON.parse(JSON.stringify(n)):{};if(e.option.isPaging===!0)if(e.option.pagingMode==="client"){N[e.sequence]=Y(t);let i=K(r.paging,N[e.sequence].length),s=(i.pageNo-1)*i.pageSize,o=s+i.pageSize;a=Y(N[e.sequence].slice(s,o)),M[e.sequence]={...r,paging:i}}else{let i=r?.paging?.totalCount;i==null&&(i=a.length);let s=K(r.paging,i);M[e.sequence]={...r,paging:s},N[e.sequence]=[]}else N[e.sequence]=[];for(let i of a)i._rowSeq=d.getNextSeq(e),i._state=u.row.status.select;y[e.sequence].data=a,y[e.sequence].originData={},y[e.sequence].data.forEach(i=>{y[e.sequence].originData[i._rowSeq]=JSON.parse(JSON.stringify(i))}),q.refresh(e)},Q=e=>u.row.status.select===e,he=e=>u.row.status.insert===e,we=e=>u.row.status.update===e,Re=e=>u.row.status.remove===e;var w={},d={init:e=>Ee(e),clean:e=>ye(e),getCurSeq:e=>w[e.sequence].curSeq,getNextSeq:e=>++w[e.sequence].curSeq,setSeqIndex:(e,t,n)=>w[e.sequence].seqIndex[t]=n,getSeqIndex:(e,t)=>w[e.sequence].seqIndex[t],setIdxSequence:(e,t,n)=>w[e.sequence].idxSequence[t]=n,getIdxSequence:(e,t)=>w[e.sequence].idxSequence[t],getFirstRowElement:e=>d.getSeqRowElement(e,d.getIdxSequence(e,0)),getFirstRowSeq:e=>d.getSeqRowElement(e,d.getIdxSequence(e,0)).dataset.rowSeq,setSeqRowElement:(e,t,n)=>w[e.sequence].seqRowElement[t]=n,getSeqRowElement:(e,t)=>w[e.sequence].seqRowElement[t],setSeqCellElement:(e,t,n,a)=>{w[e.sequence].seqCellElement[t]||(w[e.sequence].seqCellElement[t]={}),w[e.sequence].seqCellElement[t][n]=a},getSeqCellElement:(e,t,n)=>w[e.sequence].seqCellElement[t][n],getCheckedCellElement:(e,t)=>J(e,t),getNameCheckedSeqs:(e,t)=>qe(e,t),getNameCheckedItems:(e,t)=>be(e,t),setAllChecked:(e,t,n)=>Se(e,t,n),dataReIndexing:(e,t)=>fe(e,t),settingOption:(e,t)=>Ce(e,t),changeOption:(e,t,n)=>ve(e,t,n)},Ee=e=>{w[e.sequence]={curSeq:0,seqIndex:{},idxSequence:{},seqRowElement:{},seqCellElement:{}}},ye=e=>{w[e.sequence].seqIndex={},w[e.sequence].idxSequence={},w[e.sequence].seqRowElement={},w[e.sequence].seqCellElement={}},fe=(e,t)=>{let n=m.getData(e),a=w[e.sequence].seqIndex;n.forEach((r,i)=>a[r._rowSeq]=i),t&&(delete w[e.sequence].seqRowElement[t],delete w[e.sequence].seqCellElement[t])},Se=(e,t,n)=>{let a=w[e.sequence].seqCellElement,r=m.getData(e);for(let i in a)a[i][t].checked=n,r[d.getSeqIndex(e,i)][t]=n==!0?e.option.checkbox.check:e.option.checkbox.uncheck},J=(e,t)=>Object.entries(w[e.sequence].seqCellElement).filter(n=>n[1][t].checked==!0).flatMap(n=>n[1][t]),qe=(e,t)=>{let n=[];return J(e,t).forEach(a=>n.push(Number(S.getTrNode(a).dataset.rowSeq))),n},be=(e,t)=>{let n=[];return J(e,t).forEach(a=>n.push(m.getDataIndex(e,d.getSeqIndex(e,S.getTrNode(a).dataset.rowSeq)))),JSON.parse(JSON.stringify(n))},H=(e,t)=>{let n=Number.parseInt(e,10);return Number.isNaN(n)||n<1?t:n},xe=e=>{let t=[10,20,50,100];if(!Array.isArray(e))return t;let n=[...new Set(e.map(a=>H(a,null)).filter(a=>a!==null))];return n.length>0?n:t},Ce=(e,t)=>{e.option={},e.option.style={},e.option.style.width=t?.style?.width===void 0?"100%":t.style.width,e.option.style.height=t?.style?.height===void 0?"500px":t.style.height,e.option.style.overflow={},e.option.style.overflow.y=t?.style?.overflow?.y===void 0?null:t.style.overflow.y,e.option.style.overflow.x=t?.style?.overflow?.x===void 0?null:t.style.overflow.x,e.option.style.row={},e.option.style.row.cursor=t?.style?.row?.cursor===void 0?"inherit":t.style.row.cursor,e.option.style.row.isChose=t?.style?.row?.isChose===void 0?!1:t.style.row.isChose,e.option.isHead=t?.isHead===void 0?!0:t.isHead,e.option.isPaging=t?.isPaging===void 0?!1:t.isPaging,e.option.pagingMode=String(t?.pagingMode===void 0?"server":t.pagingMode).toLowerCase()==="client"?"client":"server",e.option.paging={},e.option.paging.pageSizeOptions=xe(t?.paging?.pageSizeOptions??t?.paging?.pageSizes),e.option.paging.pageSize=e.option.paging.pageSizeOptions.includes(H(t?.paging?.pageSize,e.option.paging.pageSizeOptions[0]))?H(t?.paging?.pageSize,e.option.paging.pageSizeOptions[0]):e.option.paging.pageSizeOptions[0],e.option.paging.showPageSizeSelector=t?.paging?.showPageSizeSelector===void 0?t?.paging?.isPageSizeControl===void 0?!0:!!t.paging.isPageSizeControl:!!t.paging.showPageSizeSelector,e.option.isDblClick=t?.isDblClick===void 0?!1:t.isDblClick,e.option.empty={},e.option.empty.message=t?.empty?.message===void 0?"No Data":t.empty.message,e.option.isRowStatusColor=t?.isRowStatusColor===void 0?!0:t.isRowStatusColor,e.option.isRowStatusObserve=t?.isRowStatusObserve===void 0?!1:t.isRowStatusObserve,e.option.rowStatusObserve={},e.option.rowStatusObserve.isRowEditMode=t?.rowStatusObserve?.isRowEditMode===void 0?!1:t.rowStatusObserve.isRowEditMode,e.option.rowStatusObserve.exceptList=t?.rowStatusObserve?.exceptList===void 0?[]:t.rowStatusObserve.exceptList,e.option.isRowStatusObserve===!0&&(e.option.isRowStatusColor=!0),e.option.checkbox={},e.option.checkbox.check=t?.checkbox?.check===void 0?!0:t.checkbox.check,e.option.checkbox.uncheck=t?.checkbox?.uncheck===void 0?!1:t.checkbox.uncheck},ke=["__proto__","prototype","constructor"],De=e=>{if(typeof e!="string")return e;let t=e.trim();if(t.length===0)return"";if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;if(t!=="undefined"){if(/^[-+]?(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?$/i.test(t))return Number(t);if(t.startsWith('"')&&t.endsWith('"'))try{return JSON.parse(t)}catch{return t.slice(1,-1)}if(t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1).replace(/\\\\/g,"\\").replace(/\\'/g,"'");if(t.startsWith("{")&&t.endsWith("}")||t.startsWith("[")&&t.endsWith("]"))try{return JSON.parse(t)}catch{return e}return e}},Ne=e=>{if(typeof e!="string")throw new Error("optionName must be a string path.");let t=e.trim().replace(/^self\./,"");if(t.length===0)throw new Error("optionName must not be empty.");let n=t.split(".").map(a=>a.trim());if(n.some(a=>a.length===0))throw new Error(`Invalid option path: ${e}`);if(n.some(a=>ke.includes(a)))throw new Error(`Unsafe option path: ${e}`);if(n.some(a=>!/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(a)&&!/^\d+$/.test(a)))throw new Error(`Unsupported option path: ${e}`);return n},ve=(e,t,n)=>{let a=Ne(t),r=De(n),i=e;a.slice(0,-1).forEach(s=>{if(i[s]===void 0||i[s]===null||typeof i[s]!="object")throw new Error(`Invalid option path: ${t}`);i=i[s]}),i[a[a.length-1]]=r};var b={init:e=>Ie(e),removeRowIdx:(e,t,n)=>U(e,t,d.getIdxSequence(e,t),n),removeRowSeq:(e,t,n)=>U(e,d.getSeqIndex(e,t),t,n),removeRow:(e,t,n,a)=>U(e,t,n,a),removeRowCheckedElement:(e,t)=>v(e,null,d.getNameCheckedSeqs(e,t)),removeRowElementRowIdxs:(e,t)=>v(e,t,null),removeRowElementRowSeqs:(e,t)=>v(e,null,t),removeRowElementRowIdx:(e,t)=>v(e,[t],null),removeRowElementRowSeq:(e,t)=>v(e,null,[t]),removeRowElement:(e,t,n)=>v(e,[t],[n]),deleteRowIdx:(e,t)=>L(e,t,d.getIdxSequence(e,t)),deleteRowSeq:(e,t)=>L(e,d.getSeqIndex(e,t),t),deleteRow:(e,t,n)=>L(e,t,n)},Ie=e=>{},U=(e,t,n,a)=>{if(m.getData(e,t)._state=u.row.status.remove,a?.isDisabled!==!1)for(let r of m.getFields(e))(a?.exceptDisabledList?.length>0?a.exceptDisabledList:[]).includes(r.name)==!1&&(d.getSeqCellElement(e,n,r.name).disabled=!0);e.option.isRowStatusColor==!0&&d.getSeqRowElement(e,n).classList.add(u.class.row.remove)},v=(e,t,n)=>{t===null?(t=[],n.forEach(o=>t.push(d.getSeqIndex(e,o)))):n===null&&(n=[],t.forEach(o=>n.push(d.getIdxSequence(e,o))));let a=null,r=null,i=null,s=null;for(let o=0;o<t.length;o++){switch(s=n[o],i=d.getSeqIndex(e,s),a=d.getSeqRowElement(e,s),r=m.getData(e,i),r._state){case u.row.status.insert:L(e,i,s);break;case u.row.status.update:f.cancelRowElement(e,i,s);break;case u.row.status.select:r._state=u.row.status.remove;break}e.option.isRowStatusColor==!0&&a.classList.add(u.class.row.remove)}},L=(e,t,n)=>{m.getData(e).splice(t,1),d.getSeqRowElement(e,n).remove(),d.dataReIndexing(e,n)};var f={init:e=>Oe(e),cancelRowSeq:(e,t)=>W(e,d.getSeqIndex(e,t),t),cancelRowIdx:(e,t)=>W(e,t,d.getIdxSequence(e,t)),cancelRow:(e,t,n)=>W(e,t,n),cancelRowCheckedElement:(e,t)=>I(e,null,d.getNameCheckedSeqs(e,t)),cancelRowElementRowIdxs:(e,t)=>I(e,t,null),cancelRowElementRowSeqs:(e,t)=>I(e,null,t),cancelRowElementRowIdx:(e,t)=>I(e,[t],null),cancelRowElementRowSeq:(e,t)=>I(e,null,[t]),cancelRowElement:(e,t,n)=>I(e,[t],[n])},Oe=e=>{},W=(e,t,n)=>{let a=d.getSeqRowElement(e,n),r=m.getData(e);e.option.isRowStatusColor==!0&&(r[t]._state==u.row.status.update?a.classList.remove(u.class.row.update):r[t]._state==u.row.status.remove&&a.classList.remove(u.class.row.remove)),m.getFields(e).forEach(i=>d.getSeqCellElement(e,n,i.name).disabled=!1),a.classList.contains(u.class.row.update)?r[t]._state=u.row.status.update:r[t]._state=u.row.status.select},I=(e,t,n)=>{t===null?(t=[],n.forEach(l=>t.push(d.getSeqIndex(e,l)))):n===null&&(n=[],t.forEach(l=>n.push(d.getIdxSequence(e,l))));let a=null,r=null,i=null,s=null,o=h.getEditData(e);for(let l=0;l<t.length;l++){switch(i=n[l],r=d.getSeqIndex(e,i),a=d.getSeqRowElement(e,i),s=m.getData(e,r),s._state){case u.row.status.insert:b.removeRowElement(e,r,i);break;case u.row.status.update:for(let g in o[i])s[g]=o[i][g];delete o[i],s._state=u.row.status.select,S.elementEmpty(a);let c=[];m.getFields(e).forEach((g,x)=>a.appendChild(q.createCell(e,s,r,g,x,c))),c.forEach(g=>g.fn(g.tag,g.row));break;case u.row.status.remove:s._state=u.row.status.select;break}e.option.isRowStatusColor==!0&&(a.classList.remove(u.class.row.update),a.classList.remove(u.class.row.remove))}};var T={},h={init:e=>Me(e),getEditData:e=>T[e.sequence],isRowModifyRowIdx:(e,t,n)=>j(e,t,d.getIdxSequence(e,t),n),isRowModifyRowSeq:(e,t,n)=>j(e,d.getSeqIndex(e,t),t,n),isRowModify:(e,t,n,a)=>j(e,t,n,a),modifyRowIdx:(e,t)=>V(e,t,d.getIdxSequence(e,t)),modifyRowSeq:(e,t)=>V(e,d.getSeqIndex(e,t),t),modifyRow:(e,t,n)=>V(e,t,n),modifyRowCheckedElement:(e,t)=>O(e,null,d.getNameCheckedSeqs(e,t)),modifyRowElementRowIdxs:(e,t)=>O(e,t,null),modifyRowElementRowSeqs:(e,t)=>O(e,null,t),modifyRowElementRowIdx:(e,t)=>O(e,[t],null),modifyRowElementRowSeq:(e,t)=>O(e,null,[t]),modifyRowElement:(e,t,n)=>O(e,[t],[n])},Me=e=>{},j=(e,t,n,a)=>{let r=!1,i=m.getData(e),s=m.getOriginData(e);for(let o in i[t])if(o.indexOf("_")!=0&&(a?.exceptList?.length>0?a.exceptList:[]).includes(o)==!1&&i[t][o]!=s[n][o]){r=!0;break}return r},V=(e,t,n)=>{m.getData(e,t)._state=u.row.status.update,e.option.isRowStatusColor==!0&&d.getSeqRowElement(e,n).classList.add(u.class.row.update)},O=(e,t,n)=>{t===null?(t=[],n.forEach(l=>t.push(d.getSeqIndex(e,l)))):n===null&&(n=[],t.forEach(l=>n.push(d.getIdxSequence(e,l))));let a=null,r=null,i=null,s=null,o=null;for(let l=0;l<t.length;l++){switch(s=n[l],i=d.getSeqIndex(e,s),o=m.getData(e,i),a=d.getSeqRowElement(e,n[l]),o._state){case u.row.status.insert:case u.row.status.update:return;case u.row.status.remove:f.cancelRowElement(e,i,s);break}T[e.sequence]==null&&(T[e.sequence]={}),T[e.sequence][s]={};for(let c in o)T[e.sequence][s][c]=o[c];o._state=u.row.status.update,S.elementEmpty(a),r=[],m.getFields(e).forEach((c,g)=>a.appendChild(q.createCell(e,o,i,c,g,r))),r.forEach(c=>c.fn(c.tag,c.row)),e.option.isRowStatusColor==!0&&a.classList.add(u.class.row.update)}};var te={init:(e,t)=>Te(e,t)},Te=(e,t)=>{let n=["click","change","keyup","dblclick"],a={},r=m.getFields(e);for(let l=0;l<r.length;l++){let c=r[l];c.event==null||c.event==null||n.forEach(g=>{c.event[g]&&(a[g]||(a[g]={}),a[g][c.name]={head:c.event[g].head?c.event[g].head:null,body:c.event[g].body?c.event[g].body:null})})}let i=q.getHeadElement(e),s=q.getBodyElement(e),o=q.getBodyTbElement(e);for(let l=0;l<n.length;l++)n[l]!=="dblclick"&&i.addEventListener(n[l],c=>{c.target.type=="checkbox"&&n[l]=="change"&&e.setAllChecked(c.target.name,c.target.checked),a[n[l]]&&a[n[l]][c.target.name]&&a[n[l]][c.target.name].head&&a[n[l]][c.target.name].head(c),c.stopPropagation()});for(let l=0;l<n.length;l++)n[l]==="dblclick"&&e.option.isDblClick!==!0||s.addEventListener(n[l],c=>{if(c.type=="click"&&c.target.dataset.sync=="checkbox")return;let g=S.closest("TR",c.target);if(!g)return;let x=S.closest("TD",c.target);if(!x)return;let p=x.dataset.cellName,R=g.dataset.rowSeq,E=d.getSeqIndex(e,R),C=m.getData(e,E);switch(c.target.dataset.sync){case"checkbox":C[p]=c.target.checked==!0?e.option.checkbox.check:e.option.checkbox.uncheck;break;case"number":let D=Number(c.target.value.replace("/[^0-9]/g","")),X=Number.isNaN(D)?C[p]:D;C[p]=X,c.target.value=X;break;case"text":case"select":case"date":case"dateTime":C[p]=c.target.value;break}a[n[l]]&&a[n[l]][p]&&a[n[l]][p].body&&a[n[l]][p].body(c,m.getDeepData(e,E),E,R),t&&t[n[l]]&&t[n[l]](c,m.getDeepData(e,E),E,R),e.option.isRowStatusObserve===!0&&(n[l]=="keyup"||n[l]=="change")&&e.option.rowStatusObserve.exceptList.includes(c.target.name)===!1&&(h.isRowModify(e,E,R,e.option.rowStatusObserve)?e.option.rowStatusObserve.isRowEditMode===!0?h.modifyRowElement(e,E,R):h.modifyRow(e,E,R):e.option.rowStatusObserve.isRowEditMode==!0?f.cancelRowElement(e,E,R):f.cancelRow(e,E,R)),n[l]=="click"&&["INPUT","SELECT","BUTTON"].includes(c.target.tagName)==!1&&e.option.style.row.isChose==!0&&(o.childNodes.forEach(D=>D.classList.remove(u.class.row.choose)),g.classList.add(u.class.row.choose)),c.stopPropagation()})};var _=class{constructor(t,n){return this.id=t,this.self=this,m.init(this,n),d.init(this),d.settingOption(this,n.option),q.init(this,n),f.init(this),h.init(this),b.init(this),te.init(this,n.event),q.create(this),typeof n.loaded=="function"&&n.loaded(this),this}search=t=>q.search(this,t);getData=()=>m.getDeepData(this);getPagingData=()=>m.getPagingData(this);setData=function(t,n){m.setData(this,t,n),q.refresh(this)};getDataRowSeq=t=>m.getDataRowSeq(this,t);getDataIndex=t=>m.getDataIndex(this,t);getSelectData=()=>m.getSelectData(this);getInsertData=()=>m.getInsertData(this);getUpdateData=()=>m.getUpdateData(this);getDeleteData=()=>m.getDeleteData(this);getApplyData=()=>m.getApplyData(this);prependRow=()=>q.prependRow(this);appendRow=()=>q.appendRow(this);getFirstRowElement=()=>d.getFirstRowElement(this);getFirstRowSeq=()=>d.getFirstRowSeq(this);getRowElementRowSeq=t=>d.getSeqRowElement(this,t);getSeqCellElement=(t,n)=>d.getSeqCellElement(this,t,n);getCheckedElement=t=>d.getCheckedCellElement(this,t);setAllChecked=(t,n)=>d.setAllChecked(this,t,n);getNameCheckedSeqs=t=>d.getNameCheckedSeqs(this,t);getNameCheckedItems=t=>d.getNameCheckedItems(this,t);changeOption=(t,n)=>d.changeOption(this,t,n);cancelRowSeq=t=>f.cancelRowSeq(this,t);cancelRowIdx=t=>f.cancelRowIdx(this,t);cancelRow=(t,n)=>f.cancelRow(this,t,n);cancelRowCheckedElement=t=>f.cancelRowCheckedElement(this,t);cancelRowElementRowSeqs=t=>f.cancelRowElementRowSeqs(this,t);cancelRowElementRowIdxs=t=>f.cancelRowElementRowIdxs(this,t);cancelRowElementRowSeq=t=>f.cancelRowElementRowSeq(this,t);cancelRowElementRowIdx=t=>f.cancelRowElementRowIdx(this,t);isRowModifyRowSeq=(t,n)=>h.isRowModifyRowSeq(this,t,n);isRowModifyRowIdx=(t,n)=>h.isRowModifyRowIdx(this,t,n);isRowModify=(t,n,a)=>h.isRowModify(this,t,n,a);applyModifyAndCancelRowIdx=(t,n)=>this.applyModifyAndCancel(t,d.getIdxSequence(this,t),n);applyModifyAndCancelRowSeq=(t,n)=>this.applyModifyAndCancel(d.getSeqIndex(this,t),t,n);applyModifyAndCancel(t,n,a){h.isRowModify(this,t,n,a)?a?.isRowEditMode==!0?h.modifyRowElement(this,t,n):h.modifyRow(this,t,n):a?.isRowEditMode==!0?f.cancelRowElement(this,t,n):f.cancelRow(this,t,n)}modifyRowIdx=t=>h.modifyRowIdx(this,t);modifyRowSeq=t=>h.modifyRowSeq(this,t);modifyRow=(t,n)=>h.modifyRow(this,t,n);modifyRowCheckedElement=t=>h.modifyRowCheckedElement(this,t);modifyRowElementRowIdxs=t=>h.modifyRowElementRowIdxs(this,t);modifyRowElementRowSeqs=t=>h.modifyRowElementRowSeqs(this,t);modifyRowElementRowIdx=t=>h.modifyRowElementRowIdx(this,t);modifyRowElementRowSeq=t=>h.modifyRowElementRowSeq(this,t);modifyRowElement=(t,n)=>h.modifyRowElement(this,t,n);removeRowIdx=(t,n)=>b.removeRowIdx(this,t,n);removeRowSeq=(t,n)=>b.removeRowSeq(this,t,n);removeRow=(t,n,a)=>b.removeRow(this,t,n,a);removeRowCheckedElement=t=>b.removeRowCheckedElement(this,t);removeRowElementRowIdxs=t=>b.removeRowElementRowIdxs(this,t);removeRowElementRowSeqs=t=>b.removeRowElementRowSeqs(this,t);removeRowElementRowIdx=t=>b.removeRowElementRowIdx(this,t);removeRowElementRowSeq=t=>b.removeRowElementRowSeq(this,t);removeRowElement=(t,n)=>b.removeRowElement(this,t,n);deleteRowIdx=t=>b.deleteRowIdx(this,t);deleteRowSeq=t=>b.deleteRowSeq(this,t);deleteRow=(t,n)=>b.deleteRow(this,t,n)},It=_;typeof window<"u"&&(window.wgrid=_);export{It as default};
//# sourceMappingURL=wgrid.esm.min.js.map
